# Example configuration for running an experiment using the IWSLT-15 dataset.

include "../../data/iwslt15.conf"

data {
  train-batch-size: 32
  infer-batch-size: 32
  eval-batch-size: 32
}

model {
  name: "transformer-tiny-32-curr-sl-linear"

  parameters {
    word-embeddings-size: 32

    include "../../parameters/pairwise.conf"
  }

  include "../../models/transformer/transformer_tiny.conf"
}

training {
  both-directions: false
  languages: "en:vi"
  use-identity-translations: false
  cache-data: true
  checkpoint-frequency: 5000
  summary-frequency: 100

  curriculum {
    type: "difficulty"
    max-num-histogram-bins: 1000

    score {
      // type: "length"
      // selector: "source-sentence"
      type: "sentence-rarity"
      pooling: "product"
      selector: "source-sentence"
    }

    competency {
      type: "linear-step"
      initial-value: 0.01
      num-steps-full-competency: 100
    }
  }

  logging {
    log-loss-frequency: 100
  }
}

evaluation {
  frequency: 5000
  languages: "en:vi"
}
